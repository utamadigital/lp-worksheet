<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Peta Belajar Pintar 30 Hari</title>

  <!-- Estetik fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700;800&family=Poppins:wght@700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --ink: #0f172a;
      --muted: #64748b;
      --line: #e2e8f0;
      --shadow: 0 14px 32px rgba(2,6,23,.10);
      --radius: 18px;

      --purple: #7c3aed;
      --purple-ink: #4c1d95;

      --c1-bg:#e9f5ff; --c1-br:#93c5fd;
      --c2-bg:#f4eaff; --c2-br:#c4b5fd;
      --c3-bg:#e9fff1; --c3-br:#86efac;
      --c4-bg:#fff2df; --c4-br:#fdba74;
      --c5-bg:#ffe8ed; --c5-br:#fda4af;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--ink);
      background: radial-gradient(1200px 650px at 50% 0%, #f5f7ff 0%, #ffffff 55%);
      padding: 22px;
    }

    .wrap{max-width: 1120px; margin:0 auto;}
    .sheet{
      background:#fff;
      border: 3px solid var(--purple);
      border-radius: 22px;
      padding: 18px 18px 14px;
      box-shadow: var(--shadow);
    }

    /* Header */
    .top{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      padding: 6px 6px 12px;
      text-align:center;
    }
    .star{
      width:34px;height:34px;border-radius:12px;
      display:grid;place-items:center;
      background:#fff7ed;
      border:1px solid #fed7aa;
      box-shadow: 0 10px 18px rgba(2,6,23,.08);
      transform: rotate(-6deg);
      flex: 0 0 auto;
    }
    .title{
      font-family: Poppins, Inter, system-ui;
      font-weight: 900;
      letter-spacing: .6px;
      font-size: 34px;
      line-height: 1.05;
      color: var(--purple-ink);
      text-transform: uppercase;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 7px 14px;
      border-radius: 999px;
      background:#e0f2fe;
      border: 1px solid #bae6fd;
      color:#075985;
      font-weight: 800;
      font-size: 13px;
      margin-top: 8px;
    }
    .divider{
      border:0;
      border-top: 2px dashed #cbd5e1;
      margin: 10px 0 14px;
    }

    /* Actions row */
    .actions{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin: 0 0 14px;
    }
    .legend{
      display:flex;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
      font-size: 12px;
      color: var(--muted);
      font-weight: 700;
    }
    .legend .tag{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding: 6px 10px;
      border-radius: 999px;
      background:#fff;
      border:1px solid var(--line);
    }
    .dot{width:10px;height:10px;border-radius:999px;border:1px solid rgba(2,6,23,.12)}
    .btns{display:flex; gap:8px; flex-wrap:wrap;}
    button{
      font-family: Inter, system-ui;
      border:1px solid var(--line);
      background:#fff;
      color: var(--ink);
      font-weight: 800;
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      box-shadow: 0 10px 18px rgba(2,6,23,.06);
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
    }
    button:active{transform: scale(.99)}
    .btn-primary{
      border-color:#86efac;
      background:#ecfdf5;
      color:#065f46;
    }
    .btn-danger{
      border-color:#fecaca;
      background:#fff1f2;
      color:#9f1239;
    }

    /* Grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
    }

    .card{
      position:relative;
      border-radius: 16px;
      border: 2px solid rgba(2,6,23,.10);
      padding: 14px 14px 14px;
      min-height: 120px;
      box-shadow: 0 12px 20px rgba(2,6,23,.06);
      cursor:pointer;
      user-select:none;
      transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease, filter .2s ease;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      overflow:hidden;
    }
    .card:hover{transform: translateY(-1px)}
    .card.completed{
      border-color: rgba(16,185,129,.45);
      box-shadow: 0 16px 26px rgba(2,6,23,.10);
      filter: saturate(1.05);
    }

    /* top row: number + icon */
    .toprow{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .n{
      width:26px;height:26px;
      border-radius:999px;
      background:#1d4ed8;
      color:#fff;
      font-weight: 900;
      display:grid;
      place-items:center;
      font-size: 12px;
      border: 2px solid rgba(255,255,255,.95);
      box-shadow: 0 10px 18px rgba(2,6,23,.12);
      flex:0 0 auto;
    }
    .icon{
      width:34px;height:34px;
      border-radius: 12px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(2,6,23,.08);
      box-shadow: 0 10px 18px rgba(2,6,23,.06);
      font-size: 18px;
      flex:0 0 auto;
    }

    .mid{
      margin-top: 10px;
      text-align:center;
      padding: 0 4px;
    }
    .card-title{
      font-family: Poppins, Inter, system-ui;
      font-weight: 800;
      font-size: 14px;
      line-height: 1.2;
      margin: 0 0 10px;
      letter-spacing: .1px;
    }
    .File{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      max-width: 100%;
      font-size: 11px;
      font-weight: 700;
      color: rgba(15,23,42,.70);
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(2,6,23,.10);
      padding: 5px 10px;
      border-radius: 999px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .checkwrap{
      position:absolute;
      right: 10px;
      bottom: 10px;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: rgba(255,255,255,.85);
      border: 2px solid rgba(2,6,23,.22);
      display:grid;
      place-items:center;
      box-shadow: 0 10px 18px rgba(2,6,23,.10);
    }
    .tick{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: transparent;
      transition: background .15s ease;
    }
    .card.completed .checkwrap{border-color: rgba(16,185,129,.55)}
    .card.completed .tick{background: #10b981;}

    /* Themes */
    .c1{background: var(--c1-bg); border-color: var(--c1-br);}
    .c2{background: var(--c2-bg); border-color: var(--c2-br);}
    .c3{background: var(--c3-bg); border-color: var(--c3-br);}
    .c4{background: var(--c4-bg); border-color: var(--c4-br);}
    .c5{background: var(--c5-bg); border-color: var(--c5-br);}

    /* Footer progress */
    .footer{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-top: 14px;
      padding-top: 12px;
      border-top: 1px solid var(--line);
      flex-wrap:wrap;
    }
    .progress{flex:1; min-width:260px;}
    .meta{
      font-size: 12px;
      color: var(--muted);
      font-weight: 800;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom: 8px;
    }
    .bar{
      height: 12px;
      border-radius: 999px;
      background: #f1f5f9;
      border: 1px solid #e2e8f0;
      overflow:hidden;
    }
    .bar > div{
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e, #0ea5e9);
      border-radius: 999px;
      transition: width .2s ease;
    }
    .tip{
      font-size: 12px;
      color: var(--muted);
      font-weight: 800;
      white-space: nowrap;
    }

    /* Responsive */
    @media (max-width: 980px){
      .grid{grid-template-columns: repeat(3, 1fr);}
      .title{font-size: 28px}
    }
    @media (max-width: 640px){
      body{padding: 12px;}
      .grid{grid-template-columns: repeat(2, 1fr);}
      .sheet{padding: 14px;}
      .title{font-size: 22px}
      .tip{white-space: normal}
    }

    /* Print */
    @page{ size: A4 landscape; margin: 10mm; }
    @media print{
      body{background:white; padding:0;}
      .sheet{box-shadow:none;}
      .actions{display:none;}
      *{-webkit-print-color-adjust: exact; print-color-adjust: exact;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="sheet">
      <div class="top">
        <div class="star">â­</div>
        <div>
          <div class="title">PETA BELAJAR PINTAR 30 HARI</div>
          <div class="pill">Edisi: Cerdas Dunia &amp; Akhirat</div>
        </div>
      </div>

      <hr class="divider" />

      <div class="actions">
        <div class="legend">
          <span class="tag"><span class="dot" style="background:var(--c1-bg)"></span> Tema 1</span>
          <span class="tag"><span class="dot" style="background:var(--c2-bg)"></span> Tema 2</span>
          <span class="tag"><span class="dot" style="background:var(--c3-bg)"></span> Tema 3</span>
          <span class="tag"><span class="dot" style="background:var(--c4-bg)"></span> Tema 4</span>
          <span class="tag"><span class="dot" style="background:var(--c5-bg)"></span> Tema 5</span>
          <span style="font-weight:800">â€¢ Klik kartu untuk centang</span>
        </div>

        <div class="btns">
          <button class="btn-primary" id="btnPrint">Print / Save PDF</button>
          <button id="btnExport">Export Progress</button>
          <button class="btn-danger" id="btnReset">Reset</button>
        </div>
      </div>

      <div class="grid" id="grid"></div>

      <div class="footer">
        <div class="progress">
          <div class="meta">
            <span id="metaLeft">Progress: 0/30</span>
            <span id="metaRight">Target: 10â€“20 menit/hari</span>
          </div>
          <div class="bar"><div id="barFill"></div></div>
        </div>
        <div class="tip">Tanpa gadget saat belajar</div>
      </div>
    </div>
  </div>

  <script>
    const items = [
      { icon:"ğŸ¨", title:"Latihan Mewarnai", File:"Mewarnai.pdf", theme:1 },
      { icon:"ğŸ…°ï¸", title:"Mengenal Alfabet", File:"Worksheet Umum", theme:2 },
      { icon:"ğŸ•Œ", title:"Huruf Hijaiyah", File:"Huruf Hijaiyah.pdf", theme:3 },
      { icon:"â­", title:"Rukun Iman & Islam", File:"Rukun Iman dan Islam.pdf", theme:4 },
      { icon:"ğŸ¦", title:"Mengenal Hewan", File:"Worksheet Umum", theme:5 },

      { icon:"ğŸ§¼", title:"Sholat & Wudhu", File:"Sholat dan Wudhu.pdf", theme:1 },
      { icon:"ğŸ™", title:"Doa-doa Pendek", File:"Doa-doa Pendek.pdf", theme:2 },
      { icon:"ğŸ‘", title:"Perbuatan Terpuji", File:"Perbuatan Terpuji.pdf", theme:3 },
      { icon:"ğŸ¥¦", title:"Seri Sayuran", File:"Worksheet Umum", theme:4 },
      { icon:"ğŸŒ™", title:"Kalimat Thayyibah", File:"Kalimat Thayyibah.pdf", theme:5 },

      { icon:"â•", title:"Seri Berhitung", File:"Worksheet Umum", theme:1 },
      { icon:"1ï¸âƒ£", title:"Angka Bhs. Arab", File:"Angka dalam Bahasa Arab.pdf", theme:2 },
      { icon:"â°", title:"Mengenal Waktu", File:"Worksheet Umum", theme:3 },
      { icon:"ğŸ“–", title:"Mengenal Harakat", File:"Mengenal Harakat.pdf", theme:4 },
      { icon:"ğŸš—", title:"Seri Kendaraan", File:"Worksheet Umum", theme:5 },

      { icon:"â˜ï¸", title:"Asmaul Husna", File:"Asmaul Husna.pdf", theme:1 },
      { icon:"ğŸ‘³", title:"Nabi dan Rasul", File:"Nabi dan Rasul.pdf", theme:2 },
      { icon:"ğŸ§‘â€âš•ï¸", title:"Seri Profesi", File:"Worksheet Umum", theme:3 },
      { icon:"ğŸ±", title:"Makanan Halal", File:"Makanan Halal.pdf", theme:4 },
      { icon:"ğŸ“œ", title:"Surat-surat Pendek", File:"Surat-surat Pendek.pdf", theme:5 },

      { icon:"ğŸ‘¼", title:"Nama Malaikat", File:"Nama Malaikat.pdf", theme:1 },
      { icon:"ğŸ«", title:"Mengenal Tempat", File:"Worksheet Umum", theme:2 },
      { icon:"ğŸ“…", title:"Hari Besar & Bulan", File:"Hari Besar Islam.pdf / Bulan Hijriyah.pdf", theme:3 },
      { icon:"ğŸ§¹", title:"Najis & Kebersihan", File:"Najis dalam Islam.pdf", theme:4 },
      { icon:"ğŸ“š", title:"Hadits-hadits Pendek", File:"Hadits-hadits Pendek.pdf", theme:5 },

      { icon:"ğŸŒ™", title:"Puasa", File:"Puasa.pdf", theme:1 },
      { icon:"ğŸ•‹", title:"Haji & Umroh", File:"Haji dan Umroh.pdf", theme:2 },
      { icon:"âœ¨", title:"Sifat-sifat Allah", File:"Sifat-sifat Allah.pdf", theme:3 },
      { icon:"ğŸï¸", title:"Surga & Neraka", File:"Surga Neraka.pdf", theme:4 },
      { icon:"â³", title:"Hari Kiamat", File:"Hari Kiamat.pdf", theme:5 },
    ];

    const THEME_CLASS = { 1:"c1", 2:"c2", 3:"c3", 4:"c4", 5:"c5" };
    const KEY = "peta30_progress_v2";

    const grid = document.getElementById("grid");
    const metaLeft = document.getElementById("metaLeft");
    const barFill = document.getElementById("barFill");

    function loadState(){
      try{
        const raw = localStorage.getItem(KEY);
        if(!raw) return Array(items.length).fill(false);
        const parsed = JSON.parse(raw);
        if(!Array.isArray(parsed) || parsed.length !== items.length) return Array(items.length).fill(false);
        return parsed.map(Boolean);
      }catch(_){ return Array(items.length).fill(false); }
    }
    function saveState(state){ localStorage.setItem(KEY, JSON.stringify(state)); }

    let state = loadState();

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function toggle(i){
      state[i] = !state[i];
      saveState(state);
      render();
    }

    function render(){
      grid.innerHTML = "";
      items.forEach((it, idx) => {
        const card = document.createElement("div");
        card.className = `card ${THEME_CLASS[it.theme] || "c1"} ${state[idx] ? "completed" : ""}`;
        card.setAttribute("role","button");
        card.setAttribute("tabindex","0");
        card.setAttribute("aria-pressed", state[idx] ? "true":"false");

        card.innerHTML = `
          <div class="toprow">
            <div class="n">${idx+1}</div>
            <div class="icon">${it.icon || "âœ…"}</div>
          </div>
          <div class="mid">
            <div class="card-title">${escapeHtml(it.title || "")}</div>
            <div><span class="File">File: ${escapeHtml(it.File || "")}</span></div>
          </div>
          <div class="checkwrap"><div class="tick"></div></div>
        `;

        card.addEventListener("click", () => toggle(idx));
        card.addEventListener("keydown", (e) => {
          if(e.key === "Enter" || e.key === " "){
            e.preventDefault();
            toggle(idx);
          }
        });

        grid.appendChild(card);
      });

      const done = state.filter(Boolean).length;
      metaLeft.textContent = `Progress: ${done}/${items.length}`;
      barFill.style.width = `${Math.round((done/items.length)*100)}%`;
    }

    function reset(){
      state = Array(items.length).fill(false);
      saveState(state);
      render();
    }

    function downloadText(filename, text){
      const blob = new Blob([text], {type:"application/json"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      a.click();
      URL.revokeObjectURL(a.href);
    }

    document.getElementById("btnPrint").addEventListener("click", () => window.print());
    document.getElementById("btnReset").addEventListener("click", () => {
      const ok = confirm("Reset semua centang? (Progress akan hilang)");
      if(ok) reset();
    });
    document.getElementById("btnExport").addEventListener("click", () => {
      const payload = {
        version: 2,
        exportedAt: new Date().toISOString(),
        progress: state,
        done: state.filter(Boolean).length,
        total: state.length,
        items
      };
      downloadText("progress-peta-30-hari.json", JSON.stringify(payload, null, 2));
    });

    render();
  </script>
</body>
</html>
